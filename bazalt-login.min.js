!function(){define("bazalt-login/app",["jquery","angular","angular-resource"],function(a,b){"use strict";return b.module("bazalt-login",[]).provider("bazaltLogin",function(){this.$baseUrl="/user",this.$templateUrl="/views/user",this.baseUrl=function(a){this.$baseUrl=a},this.templateUrl=function(a){this.$templateUrl=a},this.$get=function(){var a=this;return{baseUrl:function(){return a.$baseUrl},templateUrl:function(){return a.$templateUrl}}}}).config(["$routeProvider","$locationProvider","bazaltLoginProvider",function(a,b,c){var d=c.$baseUrl,e=c.$templateUrl;a.when(d+"/register",{templateUrl:e+"/account/registerForm.html",controller:"RegisterCtrl"}).when(d+"/terms",{templateUrl:e+"/modals/terms.html",controller:"ModalCtrl"}).when(d+"/privacy",{templateUrl:e+"/modals/privacy.html",controller:"ModalCtrl"}).when(d+"/activationSent",{templateUrl:e+"/account/registerSuccessMessage.html"}).when(d+"/resendActivation",{templateUrl:e+"/account/resendActivationForm.html",controller:"RegisterCtrl"}).when(d+"/activationResent",{templateUrl:e+"/account/activationResentMessage.html",controller:"RegisterCtrl"}).when(d+"/activate/:activationKey",{templateUrl:e+"/account/activationResentMessage.html",controller:"RegisterCtrl"}).when(d+"/login",{templateUrl:e+"/account/loginForm.html",controller:"LoginCtrl"})}])}),define("bazalt-login/controllers/RegisterCtrl",["bazalt-login/app"],function(a){a.controller("RegisterCtrl",["$scope","$location","UserResource","bazaltLogin",function(a,b,c,d){a.form={},a.registerUser=function(){var e=new c(a.form);e.$register(function(){b.path(d.baseUrl()+"/activationSent")},function(b){400==b.status&&a.register.invalidForm(b.data)})},a.resendActivation=function(){$http.post("/account/resendActivation",a.form).success(function(){b.path("/activationResent")}).error(function(b){a.error=b.error.message})}}])}),define("bazalt-login/controllers/LoginCtrl",["bazalt-login/app"],function(a){a.controller("LoginCtrl",["$scope","$location","UserResource",function(a,b,c){a.form={},a.loginUser=function(){var b=a.form;c.login(b,function(){},function(b){400==b.status&&a.login.invalidForm(b.data)})}}])}),define("bazalt-login/controllers/ModalCtrl",["bazalt-login/app"],function(a){a.controller("ModalCtrl",["$scope",function(a){this.setModel=function(b){a.$apply(function(){a.data=b})},a.setModel=this.setModel}])}),define("bazalt-login/controllers",["bazalt-login/controllers/RegisterCtrl","bazalt-login/controllers/LoginCtrl","bazalt-login/controllers/ModalCtrl"],function(){}),define("bazalt-login/directives/remoteForm",["bazalt-login/app"],function(a){a.directive("remoteForm",["$log",function(a){return{restrict:"A",scope:!1,require:"form",controller:function(a){a.invalidForm=function(){}},link:function(b,c,d,e){e.invalidForm=function(b){a.error(b),angular.forEach(b,function(b,c){var d=e[c]||null;d||a.error("Field not found",c),angular.forEach(b,function(b,c){d?d.$setValidity(c,!1):a.error(b)})})}}}}])}),define("bazalt-login/directives",["bazalt-login/directives/remoteForm"],function(){}),define("bazalt-login/factories/UserResource",["bazalt-login/app"],function(a){a.factory("UserResource",["$resource","$q",function(a){return a("/rest.php/user",{},{login:{method:"POST"},register:{method:"PUT"}})}])}),define("bazalt-login/factories/errorHttpInterceptor",["bazalt-login/app"],function(a){a.factory("errorHttpInterceptor",["$q",function(a){return function(b){return b.then(function(a){return a},function(b){return 500==b.status&&console.error(b.data.error.message,b.data.error.file),405==b.status&&console.error(b.data),a.reject(b)})}}])}),define("bazalt-login/factories",["bazalt-login/factories/UserResource","bazalt-login/factories/errorHttpInterceptor"],function(){}),define("bazalt-login",["bazalt-login/controllers","bazalt-login/directives","bazalt-login/factories","bazalt-login/app"],function(){"use strict";return angular.module("bazalt-login")})}();
/*
//@ sourceMappingURL=bazalt-login.min.map
*/