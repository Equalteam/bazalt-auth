!function(){define("bazalt-login/app",["jquery","angular","angular-resource"],function(a,b){"use strict";return b.module("bazalt-login",[]).provider("bazaltLogin",function(){this.$baseUrl="/user",this.$templateUrl="/views/user",this.baseUrl=function(a){this.$baseUrl=a},this.templateUrl=function(a){this.$templateUrl=a},this.$get=function(){var a=this;return{baseUrl:function(){return a.$baseUrl},templateUrl:function(){return a.$templateUrl}}}}).config(["$routeProvider","$locationProvider","bazaltLoginProvider",function(a,b,c){var d=c.$baseUrl,e=c.$templateUrl;a.when(d+"/register",{templateUrl:e+"/account/registerForm.html",controller:"RegisterCtrl"}).when(d+"/terms",{templateUrl:e+"/modals/terms.html",controller:"ModalCtrl"}).when(d+"/privacy",{templateUrl:e+"/modals/privacy.html",controller:"ModalCtrl"}).when(d+"/activationSent",{templateUrl:e+"/account/registerSuccessMessage.html"}).when(d+"/resendActivation",{templateUrl:e+"/account/resendActivationForm.html",controller:"RegisterCtrl"}).when(d+"/activationResent",{templateUrl:e+"/account/activationResentMessage.html",controller:"RegisterCtrl"}).when(d+"/activate/:activationKey",{templateUrl:e+"/account/activationResentMessage.html",controller:"RegisterCtrl"}).when(d+"/login",{templateUrl:e+"/account/loginForm.html",controller:"LoginCtrl"})}])}),define("bazalt-login/controllers/RegisterCtrl",["bazalt-login/app"],function(a){a.controller("RegisterCtrl",["$scope","$location","UserResource","bazaltLogin","$q",function(a,b,c,d,e){a.form={},a.registerUser=function(){var e=new c(a.form);e.$register(function(){b.path(d.baseUrl()+"/activationSent")},function(b){400==b.status&&a.register.invalidForm(b.data)})},a.checkEmail=function(a){var b=e.defer();return c.checkEmail({email:a},function(a){b.resolve(a.valid)},function(a){b.reject(a)}),b.promise},a.resendActivation=function(){$http.post("/account/resendActivation",a.form).success(function(){b.path("/activationResent")}).error(function(b){a.error=b.error.message})}}])}),define("bazalt-login/controllers/LoginCtrl",["bazalt-login/app"],function(a){a.controller("LoginCtrl",["$scope","$location","UserResource",function(a,b,c){a.form={},a.loginUser=function(){var b=a.form;c.login(b,function(){},function(b){400==b.status&&a.login.invalidForm(b.data)})}}])}),define("bazalt-login/controllers/ModalCtrl",["bazalt-login/app"],function(a){a.controller("ModalCtrl",["$scope",function(a){this.setModel=function(b){a.$apply(function(){a.data=b})},a.setModel=this.setModel}])}),define("bazalt-login/controllers",["bazalt-login/controllers/RegisterCtrl","bazalt-login/controllers/LoginCtrl","bazalt-login/controllers/ModalCtrl"],function(){}),define("bazalt-login/directives/remoteForm",["bazalt-login/app"],function(a){a.directive("remoteForm",["$log",function(a){return{restrict:"A",scope:!1,require:"form",controller:["$scope",function(a){a.invalidForm=function(){}}],link:function(b,c,d,e){e.invalidForm=function(b){a.error(b),angular.forEach(b,function(b,c){var d=e[c]||null;d||a.error("Field not found",c),angular.forEach(b,function(b,c){d?d.$setValidity(c,!1):a.error(b)})})}}}}])}),define("bazalt-login/directives/bvCallback",["bazalt-login/app"],function(a){a.directive("bvCallback",["$timeout",function(a){return{require:"ngModel",scope:{callback:"&bvCallback"},link:function(b,c,d,e){b.$watch(d.ngModel,function(c){return angular.isUndefined(c)?(e.$setValidity("bvCallback",!0),void 0):(b.timer&&clearTimeout(b.timer),b.timer=a(function(){b.callback({$value:c}).then(function(a){e.$setValidity("bvCallback",a)})},200),void 0)})}}}])}),define("bazalt-login/directives/bvCompare",["bazalt-login/app"],function(a){a.directive("bvCompare",[function(){return{require:"ngModel",scope:{compareField:"="},link:function(a,b,c,d){d.$parsers.unshift(function(b){var c=b==a.compareField;return d.$setValidity("bvCompare",c),c?b:void 0}),d.$formatters.unshift(function(b){return d.$setValidity("bvCompare",b==a.compareField),b})}}}])}),define("bazalt-login/directives",["bazalt-login/directives/remoteForm","bazalt-login/directives/bvCallback","bazalt-login/directives/bvCompare"],function(){}),define("bazalt-login/factories/UserResource",["bazalt-login/app"],function(a){a.factory("UserResource",["$resource","$q",function(a){return a("/rest.php/user",{},{login:{method:"POST"},checkEmail:{method:"GET",params:{action:"checkEmail"}},register:{method:"PUT"}})}])}),define("bazalt-login/factories/errorHttpInterceptor",["bazalt-login/app"],function(a){a.factory("errorHttpInterceptor",["$q",function(a){return function(b){return b.then(function(a){return a},function(b){return 500==b.status&&console.error(b.data.error.message,b.data.error.file),405==b.status&&console.error(b.data),a.reject(b)})}}])}),define("bazalt-login/factories",["bazalt-login/factories/UserResource","bazalt-login/factories/errorHttpInterceptor"],function(){}),define("bazalt-login",["angular","bazalt-login/controllers","bazalt-login/directives","bazalt-login/factories","bazalt-login/app"],function(a){"use strict";return a.module("bazalt-login")})}();
/*
//@ sourceMappingURL=bazalt-login.min.map
*/